{
    "create": {
        "filters": {
            "body": {
                "allowEmptyArray": false,
                "allowEmptyValue": false,
                "allowEmptyObject": false
            }
        },
        "definition": {
            "qs": {},
            "url": "https://dev.azure.com/{{secrets.organization_id}}/{{parameters.project}}/_apis/wit/workitems/$Task?api-version=6.0",
            "body": [
                {
                    "op": "add",
                    "path": "/fields/System.Title",
                    "value": "{{parameters.title}}"
                },
                {
                    "op": "add",
                    "path": "/fields/System.Description",
                    "value": "{{parameters.description}}"
                },
                {
                    "op": "add",
                    "path": "/fields/System.State",
                    "value": "{{parameters.state}}"
                },
                {
                    "op": "add",
                    "path": "/fields/System.AssignedTo",
                    "value": "{{parameters.assignedTo}}"
                },
                {
                    "op": "add",
                    "path": "/fields/Microsoft.VSTS.Scheduling.RemainingWork",
                    "value": "{{parameters.remainingWork}}"
                },
                {
                    "op": "add",
                    "path": "/fields/Microsoft.VSTS.Common.Priority",
                    "value": "{{parameters.priority}}"
                },
                {
                    "op": "add",
                    "path": "/fields/Microsoft.VSTS.Common.Severity",
                    "value": "{{parameters.severity}}"
                },
                {
                    "op": "add",
                    "path": "/fields/Microsoft.VSTS.Scheduling.Effort",
                    "value": "{{parameters.effort}}"
                },
                {
                    "op": "add",
                    "path": "/fields/Microsoft.VSTS.Scheduling.OriginalEstimate",
                    "value": "{{parameters.originalEstimate}}"
                }
            ],
            "method": "post",
            "filters": {
                "body": {
                    "allowEmptyArray": false,
                    "allowEmptyValue": false,
                    "allowEmptyObject": false
                }
            },
            "headers": {
                "Content-Type": "application/json-patch+json",
                "Authorization": "Basic convertBufferBase64String('':{{secrets.access_token}})"
            },
            "response": {
                "error": {
                    "message": "{{response.data}}"
                },
                "output": "{{response.data}}"
            }
        },
        "parameters": [
            {
                "meta": {
                    "validation": {
                        "required": true,
                        "requiredDetail": {
                            "errorMsg": "Project is a required field"
                        }
                    },
                    "displayName": "Project",
                    "displayType": "text",
                    "placeholder": "Enter the Project name"
                },
                "name": "project"
            },
            {
                "meta": {
                    "validation": {
                        "required": true
                    },
                    "displayName": "Title",
                    "displayType": "text",
                    "placeholder": "Enter the task title"
                },
                "name": "title"
            },
            {
                "meta": {
                    "validation": {
                        "required": false
                    },
                    "displayName": "Description",
                    "displayType": "text",
                    "placeholder": "Enter the task description"
                },
                "name": "description"
            },
            {
                "meta": {
                    "options": [
                        {
                            "label": "To Do",
                            "value": "To Do"
                        },
                        {
                            "label": "In Progress",
                            "value": "In Progress"
                        },
                        {
                            "label": "Done",
                            "value": "Done"
                        },
                        {
                            "label": "New",
                            "value": "New"
                        },
                        {
                            "label": "Active",
                            "value": "Active"
                        },
                        {
                            "label": "Closed",
                            "value": "Closed"
                        },
                        {
                            "label": "Resolved",
                            "value": "Resolved"
                        },
                        {
                            "label": "Proposed",
                            "value": "Proposed"
                        },
                        {
                            "label": "Removed",
                            "value": "Removed"
                        }
                    ],
                    "validation": {
                        "required": false
                    },
                    "displayName": "State",
                    "displayType": "select",
                    "placeholder": "Select the task state"
                },
                "name": "state"
            },
            {
                "meta": {
                    "validation": {
                        "required": false
                    },
                    "displayName": "Assigned To",
                    "displayType": "text",
                    "placeholder": "Enter the assignee"
                },
                "name": "assignedTo"
            },
            {
                "meta": {
                    "validation": {
                        "min": 1,
                        "required": false
                    },
                    "displayName": "Remaining Work",
                    "displayType": "number",
                    "placeholder": "Enter remaining work hours"
                },
                "name": "remainingWork"
            },
            {
                "meta": {
                    "validation": {
                        "required": false
                    },
                    "displayName": "Priority",
                    "displayType": "number",
                    "placeholder": "Enter task priority"
                },
                "name": "priority"
            },
            {
                "meta": {
                    "validation": {
                        "required": false
                    },
                    "displayName": "Severity",
                    "displayType": "text",
                    "placeholder": "Enter task severity"
                },
                "name": "severity"
            },
            {
                "meta": {
                    "validation": {
                        "min": 1,
                        "required": false
                    },
                    "displayName": "Effort",
                    "displayType": "number",
                    "placeholder": "Enter effort in hours"
                },
                "name": "effort"
            },
            {
                "meta": {
                    "validation": {
                        "min": 1,
                        "required": false
                    },
                    "displayName": "Original Estimate",
                    "displayType": "number",
                    "placeholder": "Enter original estimate in hours"
                },
                "name": "originalEstimate"
            }
        ]
    },
    "update": {
        "definition": {
            "qs": {},
            "url": "https://dev.azure.com/{{secrets.organization_id}}/{{parameters.project}}/_apis/wit/workitems/{{parameters.workItemId}}?api-version=6.0",
            "body": [
                {
                    "op": "add",
                    "path": "/fields/System.Title",
                    "value": "{{parameters.title}}"
                },
                {
                    "op": "add",
                    "path": "/fields/System.State",
                    "value": "{{parameters.state}}"
                },
                {
                    "op": "add",
                    "path": "/fields/System.AssignedTo",
                    "value": "{{parameters.assignedTo}}"
                }
            ],
            "method": "patch",
            "filters": {
                "body": {
                    "allowEmptyArray": false,
                    "allowEmptyValue": false,
                    "allowEmptyObject": false
                }
            },
            "headers": {
                "Content-Type": "application/json-patch+json",
                "Authorization": "Basic convertBufferBase64String('':{{secrets.access_token}})"
            },
            "response": {
                "error": {
                    "code": "{{response.status}}",
                    "message": "{{response.data.message}}"
                },
                "output": "{{response.data}}"
            }
        },
        "parameters": [
            {
                "meta": {
                    "validation": {
                        "required": true,
                        "requiredDetail": {
                            "errorMsg": "Work ID is a required field"
                        }
                    },
                    "displayName": "Work Item ID",
                    "displayType": "text",
                    "placeholder": "Enter the Work Item ID"
                },
                "name": "workItemId"
            },
            {
                "meta": {
                    "validation": {
                        "required": true,
                        "requiredDetail": {
                            "errorMsg": "Project is a required field"
                        }
                    },
                    "displayName": "Project",
                    "displayType": "text",
                    "placeholder": "Enter the Project name"
                },
                "name": "project"
            },
            {
                "meta": {
                    "validation": {
                        "required": false
                    },
                    "displayName": "Title",
                    "displayType": "text",
                    "placeholder": "Enter the new task title",
                    "dependencies": {
                        "conditions": [
                            {
                                "field": "operation",
                                "value": "task.update",
                                "operator": "EQUALS"
                            }
                        ]
                    }
                },
                "name": "title"
            },
            {
                "meta": {
                    "options": [
                        {
                            "label": "To Do",
                            "value": "To Do"
                        },
                        {
                            "label": "In Progress",
                            "value": "In Progress"
                        },
                        {
                            "label": "Done",
                            "value": "Done"
                        },
                        {
                            "label": "New",
                            "value": "New"
                        },
                        {
                            "label": "Active",
                            "value": "Active"
                        },
                        {
                            "label": "Closed",
                            "value": "Closed"
                        },
                        {
                            "label": "Resolved",
                            "value": "Resolved"
                        },
                        {
                            "label": "Proposed",
                            "value": "Proposed"
                        },
                        {
                            "label": "Removed",
                            "value": "Removed"
                        }
                    ],
                    "validation": {
                        "required": false
                    },
                    "displayName": "State",
                    "displayType": "select",
                    "placeholder": "Enter the new task state",
                    "dependencies": {
                        "conditions": [
                            {
                                "field": "operation",
                                "value": "task.update",
                                "operator": "EQUALS"
                            }
                        ]
                    }
                },
                "name": "state"
            },
            {
                "meta": {
                    "validation": {
                        "required": true
                    },
                    "displayName": "Assigned To",
                    "displayType": "text",
                    "placeholder": "Enter the new assignee",
                    "dependencies": {
                        "conditions": [
                            {
                                "field": "operation",
                                "value": "task.update",
                                "operator": "EQUALS"
                            }
                        ]
                    }
                },
                "name": "assignedTo"
            }
        ]
    },
    "baseUrl": "https://dev.azure.com",
    "headers": {
        "Authorization": "Basic convertBufferBase64String('':{{secrets.access_token}})"
    },
    "parameters": [
        {
            "meta": {
                "validation": {
                    "required": true,
                    "requiredDetail": {
                        "errorMsg": "Project is a required field"
                    }
                },
                "displayName": "Project",
                "displayType": "text",
                "placeholder": "Enter the Project name"
            },
            "name": "project"
        }
    ],
    "definition": {
        "qs": {},
        "url": "https://dev.azure.com/{{secrets.organization_id}}/{{parameters.project}}/_apis/wit/wiql?api-version=6.0",
        "body": {
            "query": "SELECT * FROM WorkItems WHERE [System.WorkItemType] = 'Task'"
        },
        "method": "post",
        "headers": {
            "Content-Type": "application/json",
            "Authorization": "Basic convertBufferBase64String('':{{secrets.access_token}})"
        },
        "response": {
            "error": {
                "code": "{{response.status}}",
                "message": "{{response.data.message}}"
            },
            "output": "{{response.data}}"
        }
    }
}
