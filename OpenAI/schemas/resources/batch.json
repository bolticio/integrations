{
    "name": "batch",
    "parameters": [
        {
            "meta": {
                "validation": {
                    "required": true,
                    "requiredDetail": {
                        "errorMsg": "Input File ID is required field"
                    }
                },
                "description": "The ID of an uploaded file that contains requests for the new batch. The file can contain up to 50,000 requests, and can be up to 200 MB in size.",
                "displayName": "Input File ID",
                "displayType": "text",
                "placeholder": "Enter Input file ID"
            },
            "name": "inputFileId"
        },
        {
            "meta": {
                "options": [
                    {
                        "label": "/v1/chat/completions",
                        "value": "/v1/chat/completions"
                    },
                    {
                        "label": "/v1/embeddings",
                        "value": "/v1/embeddings"
                    },
                    {
                        "label": "/v1/completions",
                        "value": "/v1/completions"
                    }
                ],
                "htmlProps": {
                    "allowDynamic": true
                },
                "validation": {
                    "required": true,
                    "requiredDetail": {
                        "errorMsg": "Endpoint is required field"
                    }
                },
                "description": "The endpoint to be used for all requests in the batch. Currently /v1/chat/completions, /v1/embeddings, and /v1/completions are supported.",
                "displayName": "EndPoint (API)",
                "displayType": "select",
                "placeholder": "Select an endpoint"
            },
            "name": "endPoint"
        },
        {
            "meta": {
                "options": [
                    {
                        "label": "24 Hour",
                        "value": "24h"
                    }
                ],
                "htmlProps": {
                    "allowDynamic": true
                },
                "validation": {
                    "required": true,
                    "requiredDetail": {
                        "errorMsg": "Completion window is required field"
                    }
                },
                "description": "The time frame within which the batch should be processed. Currently only 24h is supported.",
                "displayName": "Completion Window",
                "displayType": "select",
                "placeholder": "Select a completion window"
            },
            "name": "completionWindow"
        }
    ],
    "definition": {
        "url": "https://api.openai.com/v1/batches",
        "body": {
            "endpoint": "{{parameters.endPoint}}",
            "input_file_id": "{{parameters.inputFileId}}",
            "completion_window": "{{parameters.completionWindow}}"
        },
        "method": "post",
        "headers": {
            "Content-Type": "application/json",
            "Authorization": "Bearer {{secrets.api_token}}"
        },
        "response": {
            "error": {
                "code": "{{response.status}}",
                "message": "{{response.data.error.message}}"
            },
            "output": "{{response.data}}"
        }
    }
}
