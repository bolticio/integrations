{
    "parameters": [
        {
            "meta": {
                "validation": {
                    "max": 2,
                    "min": 2,
                    "required": true,
                    "requiredDetail": {
                        "errorMsg": "Country code is a required field"
                    }
                },
                "description": "Please provide country code of a customer's phone number (e.g. 91).",
                "displayName": "Country Code",
                "displayType": "text",
                "placeholder": "Enter a country code"
            },
            "name": "countryCode"
        },
        {
            "meta": {
                "validation": {
                    "required": true,
                    "requiredDetail": {
                        "errorMsg": "Phone number is a required field"
                    }
                },
                "description": "Please provide phone number of a customer (e.g. 9998884441)).",
                "displayName": "Phone Number",
                "displayType": "phone",
                "placeholder": "Enter a phone number"
            },
            "name": "phoneNumber"
        },
        {
            "meta": {
                "validation": {
                    "required": true,
                    "requiredDetail": {
                        "errorMsg": "Message body is a required field"
                    }
                },
                "description": "Please provide textual message to be sent to a customer.",
                "displayName": "Message Body",
                "displayType": "textarea",
                "placeholder": "Enter the message body"
            },
            "name": "message"
        },
        {
            "meta": {
                "validation": {
                    "required": true
                },
                "description": "The text that appears on the main action button.",
                "displayName": "Button Text",
                "displayType": "text",
                "placeholder": "Enter the button text"
            },
            "name": "button"
        },
        {
            "meta": {
                "children": [
                    {
                        "meta": {
                            "validation": {
                                "required": true,
                                "requiredDetail": {
                                    "errorMsg": "Title is a required field."
                                }
                            },
                            "description": "Title of the section.",
                            "displayName": "Section Title",
                            "displayType": "text",
                            "placeholder": "Enter the section title"
                        },
                        "name": "title"
                    },
                    {
                        "meta": {
                            "children": [
                                {
                                    "meta": {
                                        "validation": {
                                            "required": true
                                        },
                                        "displayName": "Row ID",
                                        "displayType": "text",
                                        "placeholder": "Enter a unique ID for the row"
                                    },
                                    "name": "id"
                                },
                                {
                                    "meta": {
                                        "validation": {
                                            "required": true,
                                            "requiredDetail": {
                                                "errorMsg": "Title is a required field."
                                            }
                                        },
                                        "displayName": "Row Title",
                                        "displayType": "text",
                                        "placeholder": "Enter the title of the row"
                                    },
                                    "name": "title"
                                },
                                {
                                    "meta": {
                                        "validation": {
                                            "errorMsg": "Row description is a required field",
                                            "required": true
                                        },
                                        "displayName": "Row Description",
                                        "displayType": "text",
                                        "placeholder": "Enter the description of the row"
                                    },
                                    "name": "description"
                                }
                            ],
                            "validation": {
                                "required": true
                            },
                            "description": "An array of rows within the section.",
                            "displayName": "Rows",
                            "displayType": "array"
                        },
                        "name": "rows"
                    }
                ],
                "validation": {
                    "required": true
                },
                "description": "An array of sections with rows. Each section can have a title and multiple rows.",
                "displayName": "Section List",
                "displayType": "array"
            },
            "name": "sections"
        }
    ],
    "createMediaHandle": {
        "qs": {
            "fileCategory": {
                "enum": [
                    "message_template_media"
                ],
                "type": "string",
                "description": "Category of the file being uploaded."
            }
        },
        "form": {
            "uploadFile": {
                "type": "file",
                "format": "file",
                "description": "Path to the file being uploaded."
            }
        },
        "definition": {
            "qs": {
                "fileCategory": "{{qs.fileCategory}}"
            },
            "url": "https://api.interakt.ai/v1/public/track/files/upload_to_fb/",
            "body": {
                "uploadFile": "{{form.uploadFile}}"
            },
            "method": "POST",
            "headers": {
                "Content-Type": "multipart/form-data",
                "Authorization": "{{secrets.api_token}}"
            },
            "response": {
                "error": {
                    "code": "{{response.status}}",
                    "message": "{{response.data.message}}"
                },
                "output": "{{response.data}}"
            }
        },
        "parameters": [
            {
                "meta": {
                    "validation": {
                        "required": true,
                        "requiredDetail": {
                            "errorMsg": "Upload file is a required field"
                        }
                    },
                    "description": "Select file to upload on Interakt storage.",
                    "displayName": "Upload file",
                    "displayType": "file",
                    "placeholder": "Select file"
                },
                "name": "file"
            }
        ]
    },
    "definition": {
        "url": "https://api.interakt.ai/v1/public/message/",
        "body": {
            "data": {
                "message": {
                    "body": {
                        "text": "{{parameters.message}}"
                    },
                    "type": "list",
                    "action": {
                        "button": "{{parameters.button}}",
                        "sections": "{{parameters.sections}}"
                    }
                }
            },
            "type": "InteractiveList",
            "countryCode": "{{parameters.countryCode}}",
            "phoneNumber": "{{parameters.phoneNumber}}",
            "callbackData": "{{parameters.phoneNumber}}"
        },
        "method": "post",
        "headers": {
            "Content-Type": "application/json",
            "Authorization": "Basic {{secrets.api_token}}"
        },
        "response": {
            "error": {
                "code": "{{response.status}}",
                "message": "{{response.data.message}}"
            },
            "output": "{{response.data}}"
        }
    }
}
