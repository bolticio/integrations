{
    "parameters": [
        {
            "meta": {
                "children": [
                    {
                        "meta": {
                            "validation": {
                                "required": true
                            },
                            "description": "Paddle ID of an existing catalog price to preview charging for, prefixed with pri_.",
                            "displayName": "Price ID",
                            "displayType": "text",
                            "placeholder": "pri_01gsz8z1q1n00f12qt82y31smh"
                        },
                        "name": "price_id"
                    },
                    {
                        "meta": {
                            "validation": {
                                "min": 1,
                                "required": true
                            },
                            "description": "Quantity of this item on the transaction.",
                            "displayName": "Quantity",
                            "displayType": "number",
                            "placeholder": "1"
                        },
                        "name": "quantity"
                    },
                    {
                        "meta": {
                            "value": true,
                            "readOnly": false,
                            "validation": {
                                "disabled": false,
                                "required": false
                            },
                            "description": "Whether this item should be included in totals for this transaction preview. Typically used to exclude one-time charges from calculations.",
                            "displayName": "Include in Totals",
                            "displayType": "toggle"
                        },
                        "name": "include_in_totals"
                    }
                ],
                "readOnly": false,
                "htmlProps": {
                    "allowAdd": true
                },
                "validation": {
                    "required": true
                },
                "description": "List of items to preview charging for. You can preview charging for items that you've added to your catalog by passing the Paddle ID of an existing price entity, or you can preview charging for non-catalog items by passing a price object.",
                "displayName": "Items",
                "displayType": "array"
            },
            "name": "items"
        },
        {
            "meta": {
                "validation": {
                    "required": false
                },
                "description": "Paddle ID of the customer that this transaction preview is for, prefixed with ctm_.",
                "displayName": "Customer ID",
                "displayType": "text",
                "placeholder": "ctm_01hv6y1jedq4p1n0yqn5ba3ky4"
            },
            "name": "customer_id"
        },
        {
            "meta": {
                "validation": {
                    "required": false
                },
                "description": "Paddle ID of the address that this transaction preview is for, prefixed with add_. Send one of address_id, customer_ip_address, or the address object when previewing.",
                "displayName": "Address ID",
                "displayType": "text",
                "placeholder": "add_01gm302t81w94gyjpjpqypkzkf"
            },
            "name": "address_id"
        },
        {
            "meta": {
                "validation": {
                    "required": false
                },
                "description": "Paddle ID of the business that this transaction preview is for, prefixed with biz_.",
                "displayName": "Business ID",
                "displayType": "text",
                "placeholder": "biz_01h84t5atqy345evgj07qyx4ag"
            },
            "name": "business_id"
        },
        {
            "meta": {
                "options": [
                    {
                        "label": "United States Dollar",
                        "value": "USD"
                    },
                    {
                        "label": "Euro",
                        "value": "EUR"
                    },
                    {
                        "label": "Pound Sterling",
                        "value": "GBP"
                    },
                    {
                        "label": "Japanese Yen",
                        "value": "JPY"
                    },
                    {
                        "label": "Australian Dollar",
                        "value": "AUD"
                    },
                    {
                        "label": "Canadian Dollar",
                        "value": "CAD"
                    },
                    {
                        "label": "Swiss Franc",
                        "value": "CHF"
                    },
                    {
                        "label": "Hong Kong Dollar",
                        "value": "HKD"
                    },
                    {
                        "label": "Singapore Dollar",
                        "value": "SGD"
                    },
                    {
                        "label": "Swedish Krona",
                        "value": "SEK"
                    },
                    {
                        "label": "Argentine Peso",
                        "value": "ARS"
                    },
                    {
                        "label": "Brazilian Real",
                        "value": "BRL"
                    },
                    {
                        "label": "Chinese Yuan",
                        "value": "CNY"
                    },
                    {
                        "label": "Colombian Peso",
                        "value": "COP"
                    },
                    {
                        "label": "Czech Koruna",
                        "value": "CZK"
                    },
                    {
                        "label": "Danish Krone",
                        "value": "DKK"
                    },
                    {
                        "label": "Hungarian Forint",
                        "value": "HUF"
                    },
                    {
                        "label": "Israeli Shekel",
                        "value": "ILS"
                    },
                    {
                        "label": "Indian Rupee",
                        "value": "INR"
                    },
                    {
                        "label": "South Korean Won",
                        "value": "KRW"
                    },
                    {
                        "label": "Mexican Peso",
                        "value": "MXN"
                    },
                    {
                        "label": "Norwegian Krone",
                        "value": "NOK"
                    },
                    {
                        "label": "New Zealand Dollar",
                        "value": "NZD"
                    },
                    {
                        "label": "Polish Zloty",
                        "value": "PLN"
                    },
                    {
                        "label": "Russian Ruble",
                        "value": "RUB"
                    },
                    {
                        "label": "Thai Baht",
                        "value": "THB"
                    },
                    {
                        "label": "Turkish Lira",
                        "value": "TRY"
                    },
                    {
                        "label": "New Taiwan Dollar",
                        "value": "TWD"
                    },
                    {
                        "label": "Ukrainian Hryvnia",
                        "value": "UAH"
                    },
                    {
                        "label": "South African Rand",
                        "value": "ZAR"
                    }
                ],
                "htmlProps": {
                    "allowDynamic": true
                },
                "validation": {
                    "required": false
                },
                "description": "Supported three-letter ISO 4217 currency code.",
                "displayName": "Currency Code",
                "displayType": "select",
                "placeholder": "Select currency"
            },
            "name": "currency_code"
        },
        {
            "meta": {
                "validation": {
                    "required": false
                },
                "description": "Paddle ID of the discount to apply to this transaction preview, prefixed with dsc_.",
                "displayName": "Discount ID",
                "displayType": "text",
                "placeholder": "dsc_01gt218xfk7yztpvgmcazkes7x"
            },
            "name": "discount_id"
        },
        {
            "meta": {
                "value": false,
                "readOnly": false,
                "validation": {
                    "disabled": false,
                    "required": false
                },
                "description": "Whether trials should be ignored for transaction preview calculations. By default, recurring items with trials are considered to have a zero charge when previewing. Set to true to disable this.",
                "displayName": "Ignore Trials",
                "displayType": "toggle",
                "placeholder": "Enable to ignore trial periods"
            },
            "name": "ignore_trials"
        },
        {
            "meta": {
                "validation": {
                    "required": false
                },
                "description": "IP address for this transaction preview. Send one of address_id, customer_ip_address, or the address object when previewing. Paddle fetches location using the IP address to calculate totals.",
                "displayName": "Customer IP Address",
                "displayType": "text",
                "placeholder": "192.168.1.1"
            },
            "name": "customer_ip_address"
        },
        {
            "meta": {
                "children": [
                    {
                        "meta": {
                            "validation": {
                                "required": false
                            },
                            "description": "Two-letter ISO 3166-1 alpha-2 country code.",
                            "displayName": "Country Code",
                            "displayType": "text",
                            "placeholder": "US"
                        },
                        "name": "country_code"
                    },
                    {
                        "meta": {
                            "validation": {
                                "required": false
                            },
                            "description": "ZIP or postal code for this address.",
                            "displayName": "Postal Code",
                            "displayType": "text",
                            "placeholder": "10001"
                        },
                        "name": "postal_code"
                    }
                ],
                "htmlProps": {
                    "allowDynamic": true
                },
                "validation": {
                    "required": false
                },
                "description": "Address for this transaction preview. Send one of address_id, customer_ip_address, or the address object when previewing. Paddle uses the country and ZIP code (where supplied) to calculate totals.",
                "displayName": "Address",
                "displayType": "object"
            },
            "name": "address"
        }
    ],
    "definition": {
        "url": "https://{{secrets.environment_url}}/transactions/preview",
        "body": {
            "items": "{{parameters.items}}",
            "address": "{{parameters.address}}",
            "address_id": "{{parameters.address_id}}",
            "business_id": "{{parameters.business_id}}",
            "customer_id": "{{parameters.customer_id}}",
            "discount_id": "{{parameters.discount_id}}",
            "currency_code": "{{parameters.currency_code}}",
            "ignore_trials": "{{parameters.ignore_trials}}",
            "customer_ip_address": "{{parameters.customer_ip_address}}"
        },
        "method": "post",
        "headers": {
            "Accept": "application/json",
            "Content-Type": "application/json",
            "Authorization": "Bearer {{secrets.api_key}}"
        },
        "response": {
            "error": {
                "code": "{{response.status}}",
                "message": "{{response.data}}"
            },
            "output": "{{response.data.data}}"
        }
    }
}
