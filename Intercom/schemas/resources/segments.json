{
    "parameters": [
        {
            "meta": {
                "options": [
                    {
                        "label": "List all Segments",
                        "value": "segments.get",
                        "description": "List all segments."
                    },
                    {
                        "label": "Retrieve a Segment",
                        "value": "segments.retrieve",
                        "description": "Retrieve a specific segment."
                    },
                    {
                        "label": "List Attached Segments for Contact",
                        "value": "segments.list",
                        "description": "A list of segments that are associated to a contact."
                    }
                ],
                "validation": {
                    "required": true
                },
                "description": "Select the operation you want to perform.",
                "displayName": "Operation",
                "displayType": "select",
                "placeholder": "Select an operation",
                "dependencies": {
                    "conditions": [
                        {
                            "field": "resource",
                            "value": "segments",
                            "operator": "EQUALS"
                        }
                    ]
                }
            },
            "name": "operation"
        }
    ],
    "retrieve": {
        "definition": {
            "url": "https://api.intercom.io/contacts/{{parameters.id}}",
            "body": {
                "id": "{{parameters.id}}"
            },
            "method": "GET",
            "headers": {
                "Accept": "application/json",
                "Content-Type": "application/json",
                "Authorization": "Bearer {{secrets.api_key}}",
                "Intercom-Version": "2.14"
            },
            "response": {
                "error": {
                    "code": "{{response.data.errors[0].code}}",
                    "message": "{{response.data.errors[0].message}}"
                },
                "output": "{{response.data}}"
            }
        },
        "parameters": [
            {
                "meta": {
                    "validation": {
                        "required": true,
                        "requiredDetail": {
                            "errorMsg": "Contact ID is required"
                        }
                    },
                    "description": "Enter the Contact ID given by the Intercom you want to retrieve.",
                    "displayName": "Contact ID",
                    "displayType": "text",
                    "placeholder": "Enter the Contact ID"
                },
                "name": "id"
            }
        ]
    },
    "create": {
        "definition": {
            "url": "https://api.intercom.io/companies",
            "body": {
                "name": "{{parameters.name}}",
                "plan": "{{parameters.plan}}",
                "size": "{{parameters.size}}",
                "industry": "{{parameters.industry}}",
                "company_id": "{{parameters.company_id}}"
            },
            "method": "post",
            "headers": {
                "Accept": "application/json",
                "Content-Type": "application/json",
                "Authorization": "Bearer {{secrets.api_key}}",
                "Intercom-Version": "2.14"
            },
            "response": {
                "error": {
                    "code": "{{response.data.errors[0].code}}",
                    "message": "{{response.data.errors[0].message}}"
                },
                "output": "{{response.data}}"
            }
        },
        "parameters": [
            {
                "meta": {
                    "validation": {
                        "required": true,
                        "requiredDetail": {
                            "errorMsg": "Company Name is required"
                        }
                    },
                    "description": "Enter the name of the company you want to create.",
                    "displayName": "Company Name",
                    "displayType": "text",
                    "placeholder": "Enter the name of the company"
                },
                "name": "name"
            },
            {
                "meta": {
                    "validation": {
                        "required": true,
                        "requiredDetail": {
                            "errorMsg": "Company ID is required"
                        }
                    },
                    "description": "Enter the Company ID you want to create.",
                    "displayName": "Company ID",
                    "displayType": "text",
                    "placeholder": "Enter the Company ID"
                },
                "name": "company_id"
            },
            {
                "meta": {
                    "validation": {
                        "required": false
                    },
                    "description": "Enter the name of the plan you have associated with the company.Example:'Enterprise'",
                    "displayName": "Company Plan",
                    "displayType": "text",
                    "placeholder": "Enter the name of the plan"
                },
                "name": "plan"
            },
            {
                "meta": {
                    "validation": {
                        "required": false
                    },
                    "description": "Enter the no. of employees in this company.Example:'100'",
                    "displayName": "Company's Size",
                    "displayType": "text",
                    "placeholder": "Enter the no. of employees"
                },
                "name": "size"
            },
            {
                "meta": {
                    "validation": {
                        "required": false
                    },
                    "description": "Enter the industry that this company operates in.Example:'Manufacturing'",
                    "displayName": "Industry Name",
                    "displayType": "text",
                    "placeholder": "Enter the industry"
                },
                "name": "industry"
            }
        ]
    },
    "get": {
        "definition": {
            "url": "https://api.intercom.io/companies",
            "method": "GET",
            "headers": {
                "Authorization": "Bearer {{secrets.api_key}}",
                "Intercom-Version": "2.14"
            },
            "response": {
                "error": {
                    "code": "{{response.data.errors[0].code}}",
                    "message": "{{response.data.errors[0].message}}"
                },
                "output": "{{response.data}}"
            }
        },
        "parameters": []
    },
    "delete": {
        "definition": {
            "url": "https://api.intercom.io/contacts/{{parameters.id}}",
            "method": "delete",
            "headers": {
                "Accept": "application/json",
                "Content-Type": "application/json",
                "Authorization": "Bearer {{secrets.api_key}}",
                "Intercom-Version": "2.14"
            },
            "response": {
                "error": {
                    "code": "{{response.data.errors[0].code}}",
                    "message": "{{response.data.errors[0].message}}"
                },
                "output": "{{response.data.deleted}}"
            }
        },
        "parameters": [
            {
                "meta": {
                    "validation": {
                        "required": true,
                        "requiredDetail": {
                            "errorMsg": "Contact ID is required"
                        }
                    },
                    "description": "Enter the Contact ID given by the Intercom you want to delete.",
                    "displayName": "Contact ID ",
                    "displayType": "text",
                    "placeholder": "Enter the Contact ID"
                },
                "name": "id"
            }
        ]
    }
}
