{
    "parameters": [
        {
            "meta": {
                "options": [
                    {
                        "label": "Regular",
                        "value": "regular"
                    },
                    {
                        "label": "Plain-text",
                        "value": "plaintext"
                    },
                    {
                        "label": "RSS",
                        "value": "rss"
                    },
                    {
                        "label": "A/B Split",
                        "value": "absplit"
                    },
                    {
                        "label": "Variate",
                        "value": "variate"
                    }
                ],
                "validation": {
                    "required": true
                },
                "description": "The type of campaign to create.",
                "displayName": "Campaign Type",
                "displayType": "select",
                "placeholder": "Select campaign type"
            },
            "name": "type"
        },
        {
            "meta": {
                "validation": {
                    "required": true
                },
                "description": "The unique id for the next list. <a href='https://mailchimp.com/help/find-audience-id/' target='_blank'>Find your Audience ID</a>",
                "displayName": "List (Audience) ID",
                "displayType": "text",
                "placeholder": "Enter the List ID"
            },
            "name": "list_id"
        },
        {
            "meta": {
                "validation": {
                    "required": true
                },
                "description": "The subject line for the campaign.",
                "displayName": "Campaign Subject Line",
                "displayType": "text",
                "placeholder": "Enter the subject line"
            },
            "name": "subject_line"
        },
        {
            "meta": {
                "validation": {
                    "required": true
                },
                "description": "The from name for the campaign.",
                "displayName": "From Name",
                "displayType": "text",
                "placeholder": "Enter the from name"
            },
            "name": "from_name"
        },
        {
            "meta": {
                "validation": {
                    "required": true
                },
                "description": "The reply-to email for the campaign.",
                "displayName": "Reply-To Email",
                "displayType": "text",
                "placeholder": "Enter the reply-to email"
            },
            "name": "reply_to"
        },
        {
            "meta": {
                "description": "The raw HTML for the campaign.",
                "displayName": "HTML Content",
                "displayType": "textarea",
                "placeholder": "Enter the HTML content"
            },
            "name": "html"
        },
        {
            "meta": {
                "description": "The plain-text version of the campaign.",
                "displayName": "Plain Text Content",
                "displayType": "textarea",
                "placeholder": "Enter the plain text content"
            },
            "name": "plain_text"
        }
    ],
    "definition": {
        "url": "https://{{secrets.data_center}}.api.mailchimp.com/3.0/campaigns",
        "body": {
            "type": "{{parameters.type}}",
            "content": {
                "html": "{{parameters.html}}",
                "plain_text": "{{parameters.plain_text}}"
            },
            "settings": {
                "title": "{{parameters.title}}",
                "reply_to": "{{parameters.reply_to}}",
                "from_name": "{{parameters.from_name}}",
                "subject_line": "{{parameters.subject_line}}"
            },
            "recipients": {
                "list_id": "{{parameters.list_id}}"
            }
        },
        "method": "post",
        "headers": {
            "Content-Type": "application/json",
            "Authorization": "Bearer {{secrets.api_key}}"
        },
        "response": {
            "error": {
                "code": "{{response.status}}",
                "message": "{{response.data}}"
            },
            "output": "{{response.data}}"
        }
    }
}
